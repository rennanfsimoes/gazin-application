name: 'Kubectl tool installer'
description: 'Install a specific version of kubectl binary. Acceptable values are latest or any semantic version string like 1.15.0'
inputs:
   version:
      description: 'Version of kubectl'
      required: true
      default: 'latest'
outputs:
   kubectl-path:
      description: 'Path to the cached kubectl binary'
branding:
   color: 'blue'
runs:
   using: 'node16'
   main: 'lib/index.js'
   
name: CI
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:
jobs:
  workflow-command-job:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run application
        run: |
          aws eks --region $(terraform output -raw region) update-kubeconfig --name $(terraform output -raw cluster_name),
          kubectl cluster-info,
          kubectl apply -f gazin_service.yaml,
          kubectl apply -f gazin_application.yaml,
          kubectl apply -f gazin_hpa.yaml,
          kubectl apply -f gazin_ingress.yaml.


